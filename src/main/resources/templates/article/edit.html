<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <title>发布</title>

    <!-- include the site stylesheet -->
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <!-- include the site stylesheet -->
    <link rel="stylesheet" href="/css/bootstrap.css">
    <!-- include the site stylesheet -->
    <link rel="stylesheet" href="/css/slick.css">
    <!-- include the site stylesheet -->
    <link rel="stylesheet" href="/css/animate.css">
    <!-- include the site stylesheet -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- include the site stylesheet -->
    <link rel="stylesheet" href="/css/autoStyle.css">
    <!-- include the site stylesheet -->
    <link rel="stylesheet" href="/css/myStyle.css">
    <!-- include the site stylesheet -->
    <link rel="stylesheet" href="/css/responsive.css">
    <!-- include the site stylesheet -->
    <link rel="stylesheet" href="/css/colors.css">

    <link rel="stylesheet" href="/editormd/css/editormd.css" />
    <script src="/js/jquery.js"></script>
    <script src="/js/jquery-1.11.3.min.js"></script>
    <script src="/editormd/editormd.min.js"></script>
    <script type="text/javascript">
        var editorPub;
        $(function() {
            var editor = editormd("editormd", {
                width  : "100%",
                height : "1200",
                emoji : true,
                codeFold : true,
                path   : "/editormd/lib/",
                saveHTMLToTextarea : true,
                lineNumbers     : true,
                mode            : "markdown",
                gotoLine        : true,
                theme           : "CodeMirror",
                imageUpload : true,
                imageFormats : ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
                imageUploadURL : "/upload-img",
                htmlDecode : true,
                htmlDecode : "style,script,iframe,sub,sup|on*",
            });
            editorPub = editor;
            /*$("#get-html-btn").bind('click', function() {
                var html = editor.getValue();
                $("#content").val(html);
            });*/

        });

        function handleContent() {
            var html = editorPub.getValue();
            $("#content").val(html);
        }

    </script>
</head>

<body>

<header class="header">
    <div class="containe">
        <div id="nav-box" class="nav-bar header-nav right" data-type="index" data-infoid="index">
            <div class="container">
                <h1 class="logo"> <a href="/" title="Weblog"> <img src="/img/logo_5.png" alt="Weblog"> </a> </h1>
                <nav class="nav-bar">
                    <ul class="nav">
                        <li id="nvabar-item-index"><a href="/">首页</a></li>
                        <li id="navbar-category-2"><a href="/articles?type=2">IT技术</a></li>
                        <li id="navbar-category-3"><a href="/articles?type=3">小工具</a></li>
                        <li id="navbar-category-1"><a href="/articles?type=1">好文章</a></li>
                        <li id="navbar-category-4"><a href="/board">留言板</a></li>
                        <!--<li id="navbar-category-3"><a href="/cygs/">创业故事</a></li>
                        <li id="navbar-category-4"><a href="/cydz/">创业点子</a></li>
                        <li id="navbar-category-7"><a href="/lz/">故事语录</a>
                            <ul class="sub-nav">
                                <li id="navbar-category-7"><a href="/lz/lzyl/">励志语录</a></li>
                                <li id="navbar-category-7"><a href="/lz/lzgs/">励志故事</a></li>
                            </ul>
                        </li>-->
                        <li id="navbar-category-28"><a href="/contact-us">关于我们</a>
                            <ul class="sub-nav">
                                <li id="navbar-category-28"><a href="/contact-us">联系我们</a></li>
                                <li id="navbar-category-28"><a href="/about">关于我们</a></li>
                                <li id="navbar-category-28"><a href="/contribute">投稿须知</a></li>
                            </ul>
                        </li>
                    </ul>
                    <ul class="mnav">
                        <li id="nvabar-item-index"><a href="/">首页</a></li>
                        <li id="navbar-category-2"><a href="/articles?type=2">IT技术</a></li>
                        <li id="navbar-category-3"><a href="/articles?type=3">小工具</a></li>
                        <li id="navbar-category-1"><a href="/articles?type=1">好文章</a></li>
                        <li id="navbar-category-4"><a href="/board">留言板</a></li>
                        <!--<li id="navbar-category-3"><a href="/cygs/">创业故事</a></li>
                        <li id="navbar-category-4"><a href="/cydz/">创业点子</a></li>
                        <li id="navbar-category-7"><a href="/lz/">故事语录</a>
                            <ul class="sub-nav">
                                <li id="navbar-category-7"><a href="/lz/lzyl/">励志语录</a></li>
                                <li id="navbar-category-7"><a href="/lz/lzgs/">励志故事</a></li>
                            </ul>
                        </li>-->
                        <li id="navbar-category-30"><a href="javascript:;">用户中心</a>
                            <ul class="sub-nav">
                                <li id="navbar-category-30" th:if="${session.user==null}"><a href="/login">登录</a></li>
                                <li id="navbar-category-30" th:if="${session.user!=null}"><a href="javascript:;">[[${session.user.nickName}]]</a></li>
                                <li id="navbar-category-30" th:if="${session.user!=null && session.user.type!='user'}"><a href="/admin/add">发布</a></li>
                                <li id="navbar-category-30" th:if="${session.user!=null}"><a href="/login-out">注销</a></li>

                            </ul>
                        </li>
                        <li id="navbar-category-28"><a href="/contact-us">关于我们</a>
                            <ul class="sub-nav">
                                <li id="navbar-category-28"><a href="/contact-us">联系我们</a></li>
                                <li id="navbar-category-28"><a href="/about">关于我们</a></li>
                                <li id="navbar-category-28"><a href="/contribute">投稿须知</a></li>
                            </ul>
                        </li>
                    </ul>
                </nav>
                <div id="m-btn" class="m-btn"><i class="fa fa-bars"></i></div>

                <div class="login-info">
                        <span class="login-button">
                            <ul class="nav">
                                <div th:if="${session.user==null}" class="login-button">
                                    <a href="/login" style="color: silver;">登录</a>
                                </div>
                                <li id="navbar-category-29">

                                    <img th:if="${session.user!=null}"  th:src="@{'/show-img/' + ${session.user.headImg}}" style="width: 36px;height: 36px;border-radius: 60px;" />
                                    <ul class="sub-nav" th:if="${session.user!=null}">
                                        <li id="navbar-category-29"><a href="#"><span th:text="${session.user.nickName}" style="overflow: hidden;white-space:nowrap;"></span></a></li>
                                        <li th:if="${session.user.type!='user'}" id="navbar-category-29"><a href="/admin/add">发布</a></li>
<li id="navbar-category-29"><a href="/login-out">注销</a></li>
                                    </ul>
                                </li>
                            </ul>

                        </span>

                </div>


            </div>
        </div>

    </div>
</header>

<div style="margin-top: 56px;padding-left: 15px;">
    <form method="post" action="/admin/publish" enctype="multipart/form-data" onsubmit="handleContent()">
        <input id="id" name="id" type="hidden" th:value="${article.id}" /> <br />
        <span>标题: </span><input style="width: 500px;" class="margin-top-bottom-5" id="title" name="title" placeholder="标题" th:value="${article.title}" /> <br />
        <span>简介: </span><textarea class="margin-top-bottom-5" id="intro" name="intro" placeholder="简介" th:text="${article.intro}" style="height: 100px;width: 800px"></textarea><br />
        <span>分类: </span><input class="margin-top-bottom-5" id="category" name="category" th:value="${article.category}" placeholder="分类标签"/><br />
        <span>类型: </span><input class="margin-top-bottom-5" id="type" name="type" th:value="${article.type}" placeholder="类型"/><br />
        <span>是否原创: </span><input class="margin-top-bottom-5" type="checkbox" name="original" th:checked="${article.original==1}" value="1" placeholder="是否原创"/> <br />
        <span>设置封面图片: </span><input class="margin-top-bottom-5" id="file" name="file" style="display: inline;" type="file" /><span style="padding: 5px 0 0 0;color: red; font-size: 14px;">文章封面建议图片尺寸宽高：235px * 145px</span><br />
        <textarea id="content" hidden name="content"></textarea>
        <input type="submit" value="提交" style="width: 78px;" />
    </form>

    <!--<button id="get-html-btn">发布</button><br />-->

</div>

<div style="padding: 5px 0 0 15px;color: red; font-size: 14px;">文章中建议图片尺寸宽高：685px * 240px</div>

<div class="editormd" id="editormd" style="margin-top: 15px;">
    <textarea id="editormd-markdown-doc" th:text="${article.content}" class="editormd-markdown-textarea" name="editormd-markdown-doc">
    </textarea>

    <!-- html textarea 需要开启配置项 saveHTMLToTextarea == true -->
    <textarea class="editormd-html-textarea" name="editormd-html-code"></textarea>
</div>
</body>

</html>